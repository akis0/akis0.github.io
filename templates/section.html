{% extends "base.html" %}

{% block title %}{{ section.title | default(value=section.path) }} | {{ config.title | default(value='') }}{% endblock title %}

{% block content %}
  <article class="card" style="margin-bottom: 24px;">
    <h1 style="margin-top: 0;">{{ section.title | default(value=section.path) }}</h1>
    {% if section.description %}
      <p style="margin: 4px 0 12px; color: var(--muted);">{{ section.description }}</p>
    {% endif %}
    {% if section.content %}
      <div class="body">{{ section.content | safe }}</div>
    {% endif %}
  </article>

  {% if section.pages | length > 0 %}
    <section class="card" style="margin-bottom: 20px;">
      <h2 style="margin-top: 0;">記事一覧</h2>
      <ul style="list-style: none; padding: 0; margin: 12px 0 0;">
        {% for page in section.pages %}
          <li style="padding: 12px 0; border-bottom: 1px solid var(--border);">
            <a href="{{ page.permalink }}" style="font-weight: 600;">{{ page.title | default(value=page.path) }}</a>
            <div class="meta">
              {% if page.date %}<time datetime="{{ page.date | date(format="%Y-%m-%d") }}">{{ page.date | date(format="%Y-%m-%d") }}</time>{% endif %}
              {% if page.reading_time %}<span>{{ page.reading_time }}分で読めます</span>{% endif %}
            </div>
            {% if page.summary %}
              <p style="margin: 8px 0 0; color: var(--muted);">{{ page.summary | safe }}</p>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </section>
  {% endif %}

  {% if section.subsections | length > 0 %}
    <section class="card">
      <h2 style="margin-top: 0;">子セクション</h2>
      <ul style="list-style: none; padding: 0; margin: 12px 0 0;">
        {% for path in section.subsections %}
          {% set subsection = get_section(path=path) %}
          <li style="padding: 10px 0; border-bottom: 1px solid var(--border);">
            <a href="{{ subsection.permalink }}" style="font-weight: 600;">{{ subsection.title | default(value=subsection.path) }}</a>
            {% if subsection.description %}
              <p style="margin: 6px 0 0; color: var(--muted);">{{ subsection.description }}</p>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </section>
  {% endif %}
{% endblock content %}
